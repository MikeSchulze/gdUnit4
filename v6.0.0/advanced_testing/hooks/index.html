<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/gdUnit4/v6.0.0/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/gdUnit4/v6.0.0/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul:nth-of-type(5) > li > a, .site-nav > ul:nth-of-type(5) > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul:nth-of-type(5) > li > ul > li > ul > li a { background-image: none; } .site-nav > ul:not(:nth-of-type(5)) a, .site-nav li.external a { background-image: none; } .site-nav > ul:nth-of-type(5) > li:nth-child(1) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; } .site-nav > ul.nav-category-list > li > button svg, .site-nav > ul:nth-of-type(5) > li:nth-child(1) > button svg, .site-nav > ul:nth-of-type(5) > li:nth-child(1) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); } .site-nav > ul.nav-category-list > li.nav-list-item > ul.nav-list, .site-nav > ul:nth-of-type(5) > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul:nth-of-type(5) > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/gdUnit4/v6.0.0/assets/js/vendor/lunr.min.js"></script> <script src="/gdUnit4/v6.0.0/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Session Hooks | GdUnit4</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Session Hooks" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Testing with Hooks" /> <meta property="og:description" content="Testing with Hooks" /> <meta property="og:site_name" content="GdUnit4" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2025-10-28T21:11:56+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Session Hooks" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-10-28T21:11:56+00:00","datePublished":"2025-10-28T21:11:56+00:00","description":"Testing with Hooks","headline":"Session Hooks","mainEntityOfPage":{"@type":"WebPage","@id":"/gdUnit4/v6.0.0/advanced_testing/hooks/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/gdUnit4/v6.0.0/assets/images/logo.png"}},"url":"/gdUnit4/v6.0.0/advanced_testing/hooks/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/gdUnit4/v6.0.0/" class="site-title lh-tight"><div class="site-logo"> </div> GdUnit4 </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/" class="nav-list-link">About</a></li></ul> <div class="nav-category">First Steps</div> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/first_steps/install/" class="nav-list-link">Installation</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/first_steps/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/first_steps/run-tests/" class="nav-list-link">Run Tests</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/first_steps/getting-started/" class="nav-list-link">Getting Started</a></li></ul> <div class="nav-category">C# Project Setup</div> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/csharp_project_setup/csharp-setup/" class="nav-list-link">Setup/Installation</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/csharp_project_setup/vstest-adapter/" class="nav-list-link">Configure Your IDE</a></li></ul> <div class="nav-category">Testing</div> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/unit-testing/" class="nav-list-link">Unit Testing</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/integration-testing/" class="nav-list-link">Integration Testing</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/test-suite/" class="nav-list-link">Test Suite</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/test-case/" class="nav-list-link">Test Case</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/hooks/" class="nav-list-link">Hooks</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Asserts category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gdUnit4/v6.0.0/testing/assert/" class="nav-list-link">Asserts</a><ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-that/" class="nav-list-link">AssertThat</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-array/" class="nav-list-link">Array Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-bool/" class="nav-list-link">Boolean Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-dictionary/" class="nav-list-link">Dictionary Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-error/" class="nav-list-link">Error/Exception Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-file/" class="nav-list-link">File Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-float/" class="nav-list-link">Float/Double Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-function/" class="nav-list-link">Function/Method Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-integer/" class="nav-list-link">Integer Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-number/" class="nav-list-link">Number Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-object/" class="nav-list-link">Object Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-signal/" class="nav-list-link">Signal Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-string/" class="nav-list-link">String Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/testing/assert-vector/" class="nav-list-link">Vector Assert</a></li></ul></li></ul> <div class="nav-category"></div> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Advanced Testing category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gdUnit4/v6.0.0/advanced_testing/index/" class="nav-list-link">Advanced Testing</a><ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/tools/" class="nav-list-link">Tools and Helpers</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/hooks/" class="nav-list-link">Session Hooks</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/fuzzing/" class="nav-list-link">Fuzzing</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/paramerized_tests/" class="nav-list-link">Parameterized Tests</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/signals/" class="nav-list-link">Signals</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/mock/" class="nav-list-link">Mocking</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/spy/" class="nav-list-link">Spying</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/argument_matchers/" class="nav-list-link">Argument Matchers</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Scene Runner category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gdUnit4/v6.0.0/advanced_testing/sceneRunner/" class="nav-list-link">Scene Runner</a><ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/scene_runner/actions/" class="nav-list-link">Actions</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/scene_runner/keys/" class="nav-list-link">Key Inputs</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/scene_runner/mouse/" class="nav-list-link">Mouse Inputs</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/scene_runner/touchscreen/" class="nav-list-link">Touchscreen Inputs</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/scene_runner/sync_inputs/" class="nav-list-link">Synchronize Inputs</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/scene_runner/signals/" class="nav-list-link">Signals</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/scene_runner/functions/" class="nav-list-link">Functions</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/scene_runner/accessors/" class="nav-list-link">Accessors</a></li></ul></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/skip-tests/" class="nav-list-link">Skip Tests</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/flaky-tests/" class="nav-list-link">Flaky Tests</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/orphan/" class="nav-list-link">Orphan Nodes</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/cmd/" class="nav-list-link">Command Line Tool</a></li></ul></li></ul> <div class="nav-category"></div> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Tutorials category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gdUnit4/v6.0.0/tutorials/index/" class="nav-list-link">Tutorials</a><ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/tutorials/tdd/" class="nav-list-link">Test Driven Development</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/tutorials/scenerunner_examples/" class="nav-list-link">Testing Scene Interactions</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/tutorials/tutorial_basics/" class="nav-list-link">Basics</a></li></ul></li></ul> <div class="nav-category">FAQ</div> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/faq/ci/" class="nav-list-link">Continuous Integration Testing</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.0/faq/solutions/" class="nav-list-link">Problems & Solutions</a></li></ul> </nav> <!-- _includes/nav_footer_custom.html --> <footer class="site-footer"> <div class="version-switcher"> <label>Version:</label> <div class="version-selector"> <select onchange="location = this.value;"> <option value="/gdUnit4/latest/" class="version-dropdown-item" > latest </option> <option value="/gdUnit4/v6.0.0/" class="version-dropdown-item" selected> v6.0.0 </option> <option value="/gdUnit4/v5.1.1/" class="version-dropdown-item" > v5.1.1 </option> </select> </div> </div> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search GdUnit4" aria-label="Search GdUnit4" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/MikeSchulze/gdUnit4" class="site-button" target="_blank" rel="noopener noreferrer" > GdUnit4 on GitHub </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/gdUnit4/v6.0.0/advanced_testing/index/">Advanced Testing</a></li> <li class="breadcrumb-nav-list-item"><span>Session Hooks</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="testing-with-hooks"> <a href="#testing-with-hooks" class="anchor-heading" aria-labelledby="testing-with-hooks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing with Hooks </h1> <p>Test hooks provide powerful extension points in GdUnit4 that allow you to execute custom logic at specific moments during the test lifecycle. They enable sophisticated test environment management, custom reporting, and integration with external systems.</p> <h2 id="what-are-test-hooks"> <a href="#what-are-test-hooks" class="anchor-heading" aria-labelledby="what-are-test-hooks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What are Test Hooks? </h2> <p>Test hooks are classes that extend <code class="language-plaintext highlighter-rouge">GdUnitTestSessionHook</code> and implement methods that run at the beginning and end of test sessions. Unlike test fixtures (<code class="language-plaintext highlighter-rouge">before</code> and <code class="language-plaintext highlighter-rouge">after</code> methods) that run for individual tests, hooks operate at the session level, making them ideal for:</p> <ul> <li>Setting up and tearing down shared test environments</li> <li>Managing database connections or external services</li> <li>Generating custom test reports</li> <li>Implementing test metrics and monitoring</li> <li>Integrating with CI/CD pipelines</li> </ul> <h2 id="hook-lifecycle"> <a href="#hook-lifecycle" class="anchor-heading" aria-labelledby="hook-lifecycle"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hook Lifecycle </h2> <p>Understanding when hooks execute is crucial for proper implementation:</p> <p><img src="/gdUnit4/v6.0.0/assets/images/hooks/hook-lifecycle-diagram.svg" alt="Execution Graph" class="centered" /></p> <h2 id="gdunittestsessionhook-api"> <a href="#gdunittestsessionhook-api" class="anchor-heading" aria-labelledby="gdunittestsessionhook-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> GdUnitTestSessionHook API </h2> <p>Every custom hook must extend <code class="language-plaintext highlighter-rouge">GdUnitTestSessionHook</code> and implement two key methods:</p> <ul id="basic-hook" class="tab" data-tab="874c9197-612c-498a-9a56-fea783b2837c" data-name="basic-hook"> <li class="active" id="basic-hook-gdscript"> <a href="#">GdScript </a> </li> <li id="basic-hook-c-"> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="874c9197-612c-498a-9a56-fea783b2837c" data-name="basic-hook"> <li class="active"> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class_name</span> <span class="n">MyCustomHook</span>
<span class="k">extends</span> <span class="n">GdUnitTestSessionHook</span>

<span class="k">func</span> <span class="nf">_init</span><span class="p">():</span>
    <span class="n">super</span><span class="p">(</span><span class="s2">"MyCustomHook"</span><span class="p">,</span> <span class="s2">"Description of what this hook does"</span><span class="p">)</span>

<span class="k">func</span> <span class="nf">startup</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">GdUnitTestSession</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GdUnitResult</span><span class="p">:</span>
    <span class="c1"># Initialize resources before tests run</span>
    <span class="o">...</span>
    
    <span class="c1"># Send status messages through GdUnit messaging system</span>
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Custom hook initialized"</span><span class="p">)</span>
    
    <span class="c1"># Return success or error</span>
    <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">success</span><span class="p">()</span>

<span class="k">func</span> <span class="nf">shutdown</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">GdUnitTestSession</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GdUnitResult</span><span class="p">:</span>
    <span class="c1"># Clean up resources after tests complete</span>
    <span class="o">...</span>
    
    <span class="c1"># Send cleanup status</span>
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Custom hook cleanup completed"</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">success</span><span class="p">()</span>
</code></pre></div></div> </li> <li> <div class="advice-header"> <img style="vertical-align:middle;" src="/gdUnit4/v6.0.0\assets\images\icons\info-32x32.png" /> <span>Advice</span> <div class="advice-content"> The GdUnitTestSessionHook is current not implemented and will be released with gdUnit4.api v5.1.0 </div> </div> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">GdUnit4</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Godot</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">MyCustomHook</span> <span class="p">:</span> <span class="n">GdUnitTestSessionHook</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">MyCustomHook</span><span class="p">()</span> 
        <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="s">"MyCustomHook"</span><span class="p">,</span> <span class="s">"Description of what this hook does"</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="n">GdUnitResult</span> <span class="nf">Startup</span><span class="p">(</span><span class="n">GdUnitTestSession</span> <span class="n">session</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Initialize resources before tests run</span>
        <span class="p">...</span>
        
        <span class="c1">// Send status messages through GdUnit messaging system</span>
        <span class="n">session</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">"Custom hook initialized"</span><span class="p">);</span>
        
        <span class="c1">// Return success or error</span>
        <span class="k">return</span> <span class="n">GdUnitResult</span><span class="p">.</span><span class="nf">Success</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="n">GdUnitResult</span> <span class="nf">Shutdown</span><span class="p">(</span><span class="n">GdUnitTestSession</span> <span class="n">session</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Clean up resources after tests complete</span>
        <span class="p">...</span>
        
        <span class="c1">// Send cleanup status</span>
        <span class="n">session</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">"Custom hook cleanup completed"</span><span class="p">);</span>
        
        <span class="k">return</span> <span class="n">GdUnitResult</span><span class="p">.</span><span class="nf">Success</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> </li> </ul> <h2 id="gdunittestsession-api"> <a href="#gdunittestsession-api" class="anchor-heading" aria-labelledby="gdunittestsession-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> GdUnitTestSession API </h2> <p>The <code class="language-plaintext highlighter-rouge">GdUnitTestSession</code> object passed to your hooks provides several useful properties and methods:</p> <h3 id="properties"> <a href="#properties" class="anchor-heading" aria-labelledby="properties"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Properties </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Property</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">_test_cases</code></td> <td><code class="language-plaintext highlighter-rouge">Array[GdUnitTestCase]</code></td> <td>Collection of test cases to be executed (read-only)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">report_path</code></td> <td><code class="language-plaintext highlighter-rouge">String</code></td> <td>File system path where test reports will be generated</td> </tr> </tbody> </table></div> <h3 id="methods"> <a href="#methods" class="anchor-heading" aria-labelledby="methods"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Methods </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Method</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">send_message(message: String)</code></td> <td>Sends a message through the GdUnit messaging system</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">find_test_by_id(id: GdUnitGUID)</code></td> <td>Finds a test case by its unique identifier</td> </tr> </tbody> </table></div> <h3 id="signals"> <a href="#signals" class="anchor-heading" aria-labelledby="signals"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Signals </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Signal</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">test_event(event: GdUnitEvent)</code></td> <td>Emitted when test execution events occur</td> </tr> </tbody> </table></div> <h2 id="practical-examples"> <a href="#practical-examples" class="anchor-heading" aria-labelledby="practical-examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Practical Examples </h2> <h3 id="example-1-database-test-hook"> <a href="#example-1-database-test-hook" class="anchor-heading" aria-labelledby="example-1-database-test-hook"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 1: Database Test Hook </h3> <p>This example shows how to set up and tear down a test database for integration testing:</p> <ul id="database-example" class="tab" data-tab="1285a8c1-1aa4-4d9a-87ad-de7ed02d829c" data-name="database-example"> <li class="active" id="database-example-gdscript"> <a href="#">GdScript </a> </li> </ul> <ul class="tab-content" id="1285a8c1-1aa4-4d9a-87ad-de7ed02d829c" data-name="database-example"> <li class="active"> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class_name</span> <span class="n">DatabaseTestHook</span>
<span class="k">extends</span> <span class="n">GdUnitTestSessionHook</span>

<span class="k">var</span> <span class="n">db_connection</span>

<span class="k">func</span> <span class="nf">_init</span><span class="p">():</span>
    <span class="n">super</span><span class="p">(</span><span class="s2">"DatabaseTestHook"</span><span class="p">,</span> <span class="s2">"Manages test database lifecycle"</span><span class="p">)</span>

<span class="k">func</span> <span class="nf">startup</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">GdUnitTestSession</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GdUnitResult</span><span class="p">:</span>
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Creating test database: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">test_db_name</span><span class="p">)</span>
    
    <span class="c1"># Connect to database server</span>
    <span class="n">db_connection</span> <span class="o">=</span> <span class="n">DatabaseManager</span><span class="o">.</span><span class="n">connect_to_server</span><span class="p">({</span>
        <span class="s2">"host"</span><span class="p">:</span> <span class="s2">"localhost"</span><span class="p">,</span>
        <span class="s2">"port"</span><span class="p">:</span> <span class="mi">5432</span><span class="p">,</span>
        <span class="s2">"user"</span><span class="p">:</span> <span class="s2">"test_user"</span><span class="p">,</span>
        <span class="s2">"password"</span><span class="p">:</span> <span class="s2">"test_password"</span>
    <span class="p">})</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="n">db_connection</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"Failed to connect to database server"</span><span class="p">)</span>
    
    <span class="c1"># Create test database</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">db_connection</span><span class="o">.</span><span class="n">create_database</span><span class="p">(</span><span class="s2">"test_db_name"</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"Failed to create test database"</span><span class="p">)</span>
    
    
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Test database ready"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">success</span><span class="p">()</span>

<span class="k">func</span> <span class="nf">shutdown</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">GdUnitTestSession</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GdUnitResult</span><span class="p">:</span>
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Cleaning up test database"</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">db_connection</span><span class="p">:</span>
        <span class="c1"># Drop test database</span>
        <span class="n">db_connection</span><span class="o">.</span><span class="n">drop_database</span><span class="p">(</span><span class="s2">"test_db_name"</span><span class="p">)</span>
        <span class="n">db_connection</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Database cleanup completed"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">success</span><span class="p">()</span>
</code></pre></div></div> </li> </ul> <h3 id="example-2-performance-monitoring-hook"> <a href="#example-2-performance-monitoring-hook" class="anchor-heading" aria-labelledby="example-2-performance-monitoring-hook"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2: Performance Monitoring Hook </h3> <p>This example tracks test execution performance and generates a report:</p> <ul id="performance-example" class="tab" data-tab="670702c9-8323-407e-b399-fa59ffe0b672" data-name="performance-example"> <li class="active" id="performance-example-gdscript"> <a href="#">GdScript </a> </li> </ul> <ul class="tab-content" id="670702c9-8323-407e-b399-fa59ffe0b672" data-name="performance-example"> <li class="active"> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class_name</span> <span class="n">PerformanceMonitorHook</span>
<span class="k">extends</span> <span class="n">GdUnitTestSessionHook</span>

<span class="k">var</span> <span class="n">start_time</span><span class="p">:</span> <span class="kt">int</span>
<span class="k">var</span> <span class="n">test_metrics</span><span class="p">:</span> <span class="kt">Dictionary</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">var</span> <span class="n">current_suite</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s2">""</span>

<span class="k">func</span> <span class="nf">_init</span><span class="p">():</span>
    <span class="n">super</span><span class="p">(</span><span class="s2">"PerformanceMonitor"</span><span class="p">,</span> <span class="s2">"Tracks test execution metrics"</span><span class="p">)</span>

<span class="k">func</span> <span class="nf">startup</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">GdUnitTestSession</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GdUnitResult</span><span class="p">:</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">Time</span><span class="o">.</span><span class="n">get_ticks_msec</span><span class="p">()</span>
    
    <span class="c1"># Subscribe to test events</span>
    <span class="n">session</span><span class="o">.</span><span class="n">test_event</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">_on_test_event</span><span class="p">)</span>
    
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Performance monitoring started for </span><span class="si">%d</span><span class="s2"> test cases"</span> <span class="o">%</span> <span class="n">session</span><span class="o">.</span><span class="n">_test_cases</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">success</span><span class="p">()</span>

<span class="k">func</span> <span class="nf">shutdown</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">GdUnitTestSession</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GdUnitResult</span><span class="p">:</span>
    <span class="k">var</span> <span class="n">total_time</span> <span class="o">=</span> <span class="n">Time</span><span class="o">.</span><span class="n">get_ticks_msec</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
    
    <span class="c1"># Generate performance report</span>
    <span class="k">var</span> <span class="n">report</span> <span class="o">=</span> <span class="n">_generate_report</span><span class="p">(</span><span class="n">total_time</span><span class="p">)</span>
    
    <span class="c1"># Save report in the same directory as test reports</span>
    <span class="k">var</span> <span class="n">report_dir</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">report_path</span><span class="o">.</span><span class="n">get_base_dir</span><span class="p">()</span>
    <span class="k">var</span> <span class="n">perf_report_path</span> <span class="o">=</span> <span class="n">report_dir</span><span class="o">.</span><span class="n">path_join</span><span class="p">(</span><span class="s2">"performance_metrics.json"</span><span class="p">)</span>
    
    <span class="k">var</span> <span class="n">file</span> <span class="o">=</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">perf_report_path</span><span class="p">,</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">WRITE</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">store_string</span><span class="p">(</span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">report</span><span class="p">))</span>
        <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Performance report saved to: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">perf_report_path</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">success</span><span class="p">()</span>

<span class="k">func</span> <span class="nf">_on_test_event</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">GdUnitEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">void</span><span class="p">:</span>
    <span class="k">match</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">:</span>
        <span class="n">GdUnitEvent</span><span class="o">.</span><span class="n">TESTSUITE_BEFORE</span><span class="p">:</span>
            <span class="n">current_suite</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">suite_name</span>
            <span class="n">test_metrics</span><span class="p">[</span><span class="n">current_suite</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"start_time"</span><span class="p">:</span> <span class="n">Time</span><span class="o">.</span><span class="n">get_ticks_msec</span><span class="p">(),</span>
                <span class="s2">"tests"</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>
        
        <span class="n">GdUnitEvent</span><span class="o">.</span><span class="n">TESTCASE_AFTER</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">current_suite</span> <span class="ow">in</span> <span class="n">test_metrics</span><span class="p">:</span>
                <span class="n">test_metrics</span><span class="p">[</span><span class="n">current_suite</span><span class="p">][</span><span class="s2">"tests"</span><span class="p">][</span><span class="n">event</span><span class="o">.</span><span class="n">test_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">"duration"</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">elapsed_time</span><span class="p">,</span>
                    <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"passed"</span> <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">is_success</span> <span class="k">else</span> <span class="s2">"failed"</span>
                <span class="p">}</span>

<span class="k">func</span> <span class="nf">_generate_report</span><span class="p">(</span><span class="n">total_time</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Dictionary</span><span class="p">:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">"total_duration_ms"</span><span class="p">:</span> <span class="n">total_time</span><span class="p">,</span>
        <span class="s2">"suites"</span><span class="p">:</span> <span class="n">test_metrics</span><span class="p">,</span>
        <span class="s2">"timestamp"</span><span class="p">:</span> <span class="n">Time</span><span class="o">.</span><span class="n">get_datetime_string_from_system</span><span class="p">()</span>
    <span class="p">}</span>
</code></pre></div></div> </li> </ul> <h2 id="registering-hooks"> <a href="#registering-hooks" class="anchor-heading" aria-labelledby="registering-hooks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Registering Hooks </h2> <p>To use your custom hooks, you need to register them in the GdUnit4 settings:</p> <ol> <li>Open the <strong>GdUnit4 Settings</strong> (Tools button in the GdUnit Inspector) <img src="/gdUnit4/v6.0.0/assets/images/settings/inspector-settings.png" alt="inspector-settings" class="centered" /></li> <li>Navigate to the Hooks tab <img src="/gdUnit4/v6.0.0/assets/images/settings/settings-hooks.png" alt="settings-hook" class="centered" /></li> <li>Click the <strong>+ (Add)</strong> button</li> <li>Select your hook class file</li> <li>Enable the hook using the checkbox</li> <li>Adjust priority if needed using the arrow buttons</li> </ol> <h2 id="best-practices"> <a href="#best-practices" class="anchor-heading" aria-labelledby="best-practices"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Best Practices </h2> <h3 id="error-handling"> <a href="#error-handling" class="anchor-heading" aria-labelledby="error-handling"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Error Handling </h3> <p>Always return appropriate <code class="language-plaintext highlighter-rouge">GdUnitResult</code> values to indicate success or failure:</p> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="nf">startup</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">GdUnitTestSession</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GdUnitResult</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">initialize_resources</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"Failed to initialize resources: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">get_last_error</span><span class="p">())</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_configuration</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"Invalid configuration: missing required settings"</span><span class="p">)</span>
    
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"All systems initialized successfully"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">success</span><span class="p">()</span>
</code></pre></div></div> <h3 id="resource-management"> <a href="#resource-management" class="anchor-heading" aria-labelledby="resource-management"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resource Management </h3> <p>Ensure proper cleanup in the shutdown method, even if startup failed:</p> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="nf">shutdown</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">GdUnitTestSession</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GdUnitResult</span><span class="p">:</span>
    <span class="k">var</span> <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="c1"># Always attempt cleanup, regardless of startup success</span>
    <span class="k">if</span> <span class="n">resource_a</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">resource_a</span><span class="o">.</span><span class="n">cleanup</span><span class="p">():</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Failed to cleanup resource_a"</span><span class="p">)</span>
        <span class="n">resource_a</span> <span class="o">=</span> <span class="kt">null</span>
    
    
    <span class="k">if</span> <span class="n">errors</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">success</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">errors</span><span class="p">))</span>
</code></pre></div></div> <h3 id="session-communication"> <a href="#session-communication" class="anchor-heading" aria-labelledby="session-communication"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Session Communication </h3> <p>Use the session object effectively for communication and event handling:</p> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="nf">startup</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">GdUnitTestSession</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GdUnitResult</span><span class="p">:</span>
    <span class="c1"># Send informational messages</span>
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Initializing test environment..."</span><span class="p">)</span>
    
    <span class="c1"># Access test configuration</span>
    <span class="k">var</span> <span class="n">test_count</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">_test_cases</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Preparing to run </span><span class="si">%d</span><span class="s2"> test cases"</span> <span class="o">%</span> <span class="n">test_count</span><span class="p">)</span>
    
    <span class="c1"># Use report path for output files</span>
    <span class="k">var</span> <span class="n">report_dir</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">report_path</span><span class="o">.</span><span class="n">get_base_dir</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">"Reports will be saved to: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">report_dir</span><span class="p">)</span>
    
    <span class="c1"># Subscribe to test events</span>
    <span class="n">session</span><span class="o">.</span><span class="n">test_event</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">_on_test_event</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">GdUnitResult</span><span class="o">.</span><span class="n">success</span><span class="p">()</span>

<span class="k">func</span> <span class="nf">_on_test_event</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">GdUnitEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">void</span><span class="p">:</span>
    <span class="c1"># React to different event types</span>
    <span class="k">match</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">:</span>
        <span class="n">GdUnitEvent</span><span class="o">.</span><span class="n">INIT</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Test runner initialized"</span><span class="p">)</span>
        <span class="n">GdUnitEvent</span><span class="o">.</span><span class="n">TESTSUITE_BEFORE</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Starting suite: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">event</span><span class="o">.</span><span class="n">suite_name</span><span class="p">)</span>
        <span class="n">GdUnitEvent</span><span class="o">.</span><span class="n">TESTCASE_BEFORE</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Starting test: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">event</span><span class="o">.</span><span class="n">test_name</span><span class="p">)</span>
        <span class="n">GdUnitEvent</span><span class="o">.</span><span class="n">TESTCASE_AFTER</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Finished test: </span><span class="si">%s</span><span class="s2"> (success: </span><span class="si">%s</span><span class="s2">)"</span> <span class="o">%</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">test_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">is_success</span><span class="p">])</span>
        <span class="n">GdUnitEvent</span><span class="o">.</span><span class="n">TESTSUITE_AFTER</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Finished suite: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">event</span><span class="o">.</span><span class="n">suite_name</span><span class="p">)</span>
        <span class="n">GdUnitEvent</span><span class="o">.</span><span class="n">STOP</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Test execution stopped"</span><span class="p">)</span>
</code></pre></div></div> <h2 id="system-hooks"> <a href="#system-hooks" class="anchor-heading" aria-labelledby="system-hooks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> System Hooks </h2> <p>GdUnit4 includes built-in system hooks that cannot be removed:</p> <h3 id="gdunithtmltestreporter"> <a href="#gdunithtmltestreporter" class="anchor-heading" aria-labelledby="gdunithtmltestreporter"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> GdUnitHtmlTestReporter </h3> <p>Extends <code class="language-plaintext highlighter-rouge">GdUnitBaseReporterTestSessionHook</code> to generate interactive HTML test reports with:</p> <ul> <li>Detailed test results and execution times</li> <li>Collapsible sections for easy navigation</li> <li>Visual charts and statistics</li> <li>Failure details with stack traces</li> </ul> <h3 id="gdunitxmltestreporter"> <a href="#gdunitxmltestreporter" class="anchor-heading" aria-labelledby="gdunitxmltestreporter"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> GdUnitXMLTestReporter </h3> <p>Extends <code class="language-plaintext highlighter-rouge">GdUnitBaseReporterTestSessionHook</code> to generate JUnit-compatible XML reports for:</p> <ul> <li>CI/CD pipeline integration</li> <li>Test result aggregation tools</li> <li>Automated build systems</li> </ul> <h2 id="troubleshooting"> <a href="#troubleshooting" class="anchor-heading" aria-labelledby="troubleshooting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Troubleshooting </h2> <h3 id="common-issues"> <a href="#common-issues" class="anchor-heading" aria-labelledby="common-issues"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Common Issues </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Issue</th> <th>Solution</th> </tr> </thead> <tbody> <tr> <td>Hook not executing</td> <td>Ensure the hook is enabled in settings and the class extends <code class="language-plaintext highlighter-rouge">GdUnitTestSessionHook</code></td> </tr> <tr> <td>Startup failures</td> <td>Check console output for error messages; startup must return <code class="language-plaintext highlighter-rouge">GdUnitResult.success()</code></td> </tr> <tr> <td>Cleanup not running</td> <td>Shutdown always runs; check for errors in your shutdown implementation</td> </tr> <tr> <td>Priority conflicts</td> <td>Adjust hook order in settings; hooks execute top-to-bottom</td> </tr> <tr> <td>Missing test events</td> <td>Ensure you’re connected to <code class="language-plaintext highlighter-rouge">session.test_event</code> signal</td> </tr> <tr> <td>Report path issues</td> <td>Use <code class="language-plaintext highlighter-rouge">session.report_path.get_base_dir()</code> to get the directory</td> </tr> </tbody> </table></div> <h3 id="debug-tips"> <a href="#debug-tips" class="anchor-heading" aria-labelledby="debug-tips"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Debug Tips </h3> <ul> <li>Use <code class="language-plaintext highlighter-rouge">session.send_message()</code> for logging hook activities</li> <li>Check the Godot console for detailed error messages</li> <li>Test hooks in isolation before combining multiple hooks</li> <li>Start with simple implementations and gradually add complexity</li> <li>Use <code class="language-plaintext highlighter-rouge">print()</code> statements during development, but prefer <code class="language-plaintext highlighter-rouge">session.send_message()</code> for production</li> </ul> <h2 id="see-also"> <a href="#see-also" class="anchor-heading" aria-labelledby="see-also"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> See Also </h2> <ul> <li><a href="/gdUnit4/v6.0.0/first_steps/settings/#hooks-settings">Settings - Hooks Configuration</a> - Configure and manage hooks in the GdUnit4 settings</li> <li><a href="/gdUnit4/v6.0.0/testing/hooks/#test-setupteardown">Test Setup/Teardown</a> - Learn about test-level fixtures</li> </ul> </main> </div> </div> <footer> <div class="text-small text-grey-dk-100 mb-0"> <p>Copyright &copy; 2021-2025 Mike Schulze. Distributed by an <a href="https://github.com/MikeSchulze/gdUnit4/blob/master/LICENSE">MIT license.</a>.</p> </div> </footer> <div class="search-overlay"></div> </div> <script src="/gdUnit4/v6.0.0/assets/js/tabs.js"></script> <link rel="stylesheet" href="/gdUnit4/v6.0.0/assets/css/tab.css" /> <link rel="stylesheet" href="/gdUnit4/v6.0.0/assets/css/site-header.css" /> <link rel="stylesheet" href="/gdUnit4/v6.0.0/assets/css/site-footer.css" /> </body> </html>
