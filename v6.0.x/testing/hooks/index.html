<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/gdUnit4/v6.0.x/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/gdUnit4/v6.0.x/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul:nth-of-type(4) > li:not(:nth-child(5)) > a, .site-nav > ul:nth-of-type(4) > li > ul > li a { background-image: none; } .site-nav > ul:not(:nth-of-type(4)) a, .site-nav li.external a { background-image: none; } .site-nav > ul:nth-of-type(4) > li:nth-child(5) > a { font-weight: 600; text-decoration: none; } .site-nav > ul.nav-category-list > li > button svg, .site-nav > ul:nth-of-type(4) > li:nth-child(5) > button svg { transform: rotate(-90deg); } .site-nav > ul.nav-category-list > li.nav-list-item > ul.nav-list, .site-nav > ul:nth-of-type(4) > li.nav-list-item:nth-child(5) > ul.nav-list { display: block; } </style> <script src="/gdUnit4/v6.0.x/assets/js/vendor/lunr.min.js"></script> <script src="/gdUnit4/v6.0.x/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Hooks | GdUnit4</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Hooks" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="GdUnit Hooks" /> <meta property="og:description" content="GdUnit Hooks" /> <meta property="og:site_name" content="GdUnit4" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2025-10-31T12:14:02+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Hooks" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-10-31T12:14:02+00:00","datePublished":"2025-10-31T12:14:02+00:00","description":"GdUnit Hooks","headline":"Hooks","mainEntityOfPage":{"@type":"WebPage","@id":"/gdUnit4/v6.0.x/testing/hooks/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/gdUnit4/v6.0.x/assets/images/logo.png"}},"url":"/gdUnit4/v6.0.x/testing/hooks/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/gdUnit4/v6.0.x/" class="site-title lh-tight"><div class="site-logo"> </div> GdUnit4 </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/" class="nav-list-link">About</a></li></ul> <div class="nav-category">First Steps</div> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/first_steps/install/" class="nav-list-link">Installation</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/first_steps/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/first_steps/run-tests/" class="nav-list-link">Run Tests</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/first_steps/getting-started/" class="nav-list-link">Getting Started</a></li></ul> <div class="nav-category">C# Project Setup</div> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/csharp_project_setup/csharp-setup/" class="nav-list-link">Setup/Installation</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/csharp_project_setup/vstest-adapter/" class="nav-list-link">Configure Your IDE</a></li></ul> <div class="nav-category">Testing</div> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/unit-testing/" class="nav-list-link">Unit Testing</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/integration-testing/" class="nav-list-link">Integration Testing</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/test-suite/" class="nav-list-link">Test Suite</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/test-case/" class="nav-list-link">Test Case</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/hooks/" class="nav-list-link">Hooks</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Asserts category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gdUnit4/v6.0.x/testing/assert/" class="nav-list-link">Asserts</a><ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-that/" class="nav-list-link">AssertThat</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-array/" class="nav-list-link">Array Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-bool/" class="nav-list-link">Boolean Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-dictionary/" class="nav-list-link">Dictionary Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-error/" class="nav-list-link">Error/Exception Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-file/" class="nav-list-link">File Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-float/" class="nav-list-link">Float/Double Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-function/" class="nav-list-link">Function/Method Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-integer/" class="nav-list-link">Integer Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-number/" class="nav-list-link">Number Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-object/" class="nav-list-link">Object Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-signal/" class="nav-list-link">Signal Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-string/" class="nav-list-link">String Assert</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/testing/assert-vector/" class="nav-list-link">Vector Assert</a></li></ul></li></ul> <div class="nav-category"></div> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Advanced Testing category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gdUnit4/v6.0.x/advanced_testing/index/" class="nav-list-link">Advanced Testing</a><ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/tools/" class="nav-list-link">Tools and Helpers</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/hooks/" class="nav-list-link">Session Hooks</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/fuzzing/" class="nav-list-link">Fuzzing</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/paramerized_tests/" class="nav-list-link">Parameterized Tests</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/signals/" class="nav-list-link">Signals</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/mock/" class="nav-list-link">Mocking</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/spy/" class="nav-list-link">Spying</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/argument_matchers/" class="nav-list-link">Argument Matchers</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Scene Runner category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gdUnit4/v6.0.x/advanced_testing/sceneRunner/" class="nav-list-link">Scene Runner</a><ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/scene_runner/actions/" class="nav-list-link">Actions</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/scene_runner/keys/" class="nav-list-link">Key Inputs</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/scene_runner/mouse/" class="nav-list-link">Mouse Inputs</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/scene_runner/touchscreen/" class="nav-list-link">Touchscreen Inputs</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/scene_runner/sync_inputs/" class="nav-list-link">Synchronize Inputs</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/scene_runner/signals/" class="nav-list-link">Signals</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/scene_runner/functions/" class="nav-list-link">Functions</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/scene_runner/accessors/" class="nav-list-link">Accessors</a></li></ul></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/skip-tests/" class="nav-list-link">Skip Tests</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/flaky-tests/" class="nav-list-link">Flaky Tests</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/orphan/" class="nav-list-link">Orphan Nodes</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/advanced_testing/cmd/" class="nav-list-link">Command Line Tool</a></li></ul></li></ul> <div class="nav-category"></div> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Tutorials category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gdUnit4/v6.0.x/tutorials/index/" class="nav-list-link">Tutorials</a><ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/tutorials/tdd/" class="nav-list-link">Test Driven Development</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/tutorials/scenerunner_examples/" class="nav-list-link">Testing Scene Interactions</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/tutorials/tutorial_basics/" class="nav-list-link">Basics</a></li></ul></li></ul> <div class="nav-category">FAQ</div> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/faq/ci/" class="nav-list-link">Continuous Integration Testing</a></li><li class="nav-list-item"><a href="/gdUnit4/v6.0.x/faq/solutions/" class="nav-list-link">Problems & Solutions</a></li></ul> </nav> <!-- _includes/nav_footer_custom.html --> <footer class="site-footer"> <div class="version-switcher"> <label>Version:</label> <div class="version-selector"> <select onchange="location = this.value;"> <option value="/gdUnit4/latest/" class="version-dropdown-item" > latest </option> <option value="/gdUnit4/v6.0.x/" class="version-dropdown-item" selected> v6.0.x </option> <option value="/gdUnit4/v5.1.x/" class="version-dropdown-item" > v5.1.x </option> </select> </div> </div> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search GdUnit4" aria-label="Search GdUnit4" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/MikeSchulze/gdUnit4" class="site-button" target="_blank" rel="noopener noreferrer" > GdUnit4 on GitHub </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="gdunit-hooks"> <a href="#gdunit-hooks" class="anchor-heading" aria-labelledby="gdunit-hooks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> GdUnit Hooks </h1> <h2 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h2> <p>GdUnit4 provides multiple levels of hooks to control test execution and manage test resources. Understanding the hierarchy and execution order of these hooks is essential for writing efficient and maintainable tests.</p> <h3 id="hook-types-and-hierarchy"> <a href="#hook-types-and-hierarchy" class="anchor-heading" aria-labelledby="hook-types-and-hierarchy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hook Types and Hierarchy </h3> <p>GdUnit4 offers three distinct levels of hooks, each serving a specific purpose:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Hooks</th> <th>Scope</th> <th>Frequency</th> <th>Primary Use Case</th> </tr> </thead> <tbody> <tr> <td><strong>Session</strong></td> <td>Entire test session</td> <td>Once per test run</td> <td>External services, global resources, custom reporting</td> </tr> <tr> <td><strong>TestSuite</strong></td> <td>Single test suite</td> <td>Once per suite</td> <td>Suite-level shared resources, expensive setup</td> </tr> <tr> <td><strong>TestCase</strong></td> <td>Individual tests</td> <td>Before/after each test</td> <td>Test isolation, fresh state per test</td> </tr> </tbody> </table></div> <p><strong>Key Differences:</strong></p> <ul> <li><strong>Session Hooks</strong> are optional and configured globally in <a href="/gdUnit4/v6.0.x/first_steps/settings/#hooks-settings">GdUnit settings</a>. They wrap the entire test execution.</li> <li><strong>TestSuite Hooks</strong> (<code class="language-plaintext highlighter-rouge">before</code>/<code class="language-plaintext highlighter-rouge">after</code>) run once for all tests in a suite.</li> <li><strong>TestCase Hooks</strong> (<code class="language-plaintext highlighter-rouge">before_test</code>/<code class="language-plaintext highlighter-rouge">after_test</code>) run for each individual test, ensuring test isolation.</li> </ul> <p>For information about Session Hooks, see <a href="/gdUnit4/v6.0.x/advanced_testing/hooks/#testing-with-hooks">Testing with Hooks</a>.</p> <h3 id="test-execution-graph-overview"> <a href="#test-execution-graph-overview" class="anchor-heading" aria-labelledby="test-execution-graph-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Test Execution Graph Overview </h3> <ul id="faq-testsuite-overview" class="tab" data-tab="faa8dd06-32d3-4084-a770-74355489653b" data-name="faq-testsuite-overview"> <li class="active" id="faq-testsuite-overview-gdscript"> <a href="#">GdScript </a> </li> <li id="faq-testsuite-overview-c-"> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="faa8dd06-32d3-4084-a770-74355489653b" data-name="faq-testsuite-overview"> <li class="active"> <p><img src="/gdUnit4/v6.0.x/assets/images/hooks/execution-graph-gdscript.svg" alt="Execution Graph" class="centered" /></p> </li> <li> <p><img src="/gdUnit4/v6.0.x/assets/images/hooks/execution-graph-csharp.svg" alt="Execution Graph" class="centered" /></p> </li> </ul> <h2 id="when-to-use-each-hook"> <a href="#when-to-use-each-hook" class="anchor-heading" aria-labelledby="when-to-use-each-hook"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> When to Use Each Hook </h2> <p>Choosing the right hook level is crucial for test performance and maintainability:</p> <h3 id="use-before--before-when"> <a href="#use-before--before-when" class="anchor-heading" aria-labelledby="use-before--before-when"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use <code class="language-plaintext highlighter-rouge">before()</code> / <code class="language-plaintext highlighter-rouge">[Before]</code> when: </h3> <ul> <li>Setting up expensive resources that can be shared across all tests (read-only)</li> <li>Creating database schemas or test data that won’t be modified</li> <li>Initializing external services or connections</li> <li>Loading large test fixtures or configuration files</li> </ul> <h3 id="use-before_test--beforetest-when"> <a href="#use-before_test--beforetest-when" class="anchor-heading" aria-labelledby="use-before_test--beforetest-when"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use <code class="language-plaintext highlighter-rouge">before_test()</code> / <code class="language-plaintext highlighter-rouge">[BeforeTest]</code> when: </h3> <ul> <li>Each test needs a fresh, isolated state</li> <li>Creating mutable test data that tests will modify</li> <li>Setting up mock objects or stubs specific to a test</li> <li>Ensuring complete test independence</li> </ul> <h3 id="common-anti-patterns-to-avoid"> <a href="#common-anti-patterns-to-avoid" class="anchor-heading" aria-labelledby="common-anti-patterns-to-avoid"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Common Anti-patterns to Avoid: </h3> <ul> <li>❌ Using <code class="language-plaintext highlighter-rouge">before()</code> for mutable state that tests modify (causes test interdependence)</li> <li>❌ Using <code class="language-plaintext highlighter-rouge">before_test()</code> for expensive operations repeated unnecessarily</li> <li>❌ Forgetting to clean up resources in corresponding <code class="language-plaintext highlighter-rouge">after</code> hooks</li> </ul><hr /> <h2 id="testsuite-hooks"> <a href="#testsuite-hooks" class="anchor-heading" aria-labelledby="testsuite-hooks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> TestSuite Hooks </h2> <p>GdUnit provide the following suite hooks that allow you to control the test environment. GdUnit4 allows you to use asserts within these stages, and any errors that occur will be reported.</p> <ul id="faq-testsuite-stages" class="tab" data-tab="20d2c6bf-b437-4d7c-993b-8f77522b7981" data-name="faq-testsuite-stages"> <li class="active" id="faq-testsuite-stages-gdscript"> <a href="#">GdScript </a> </li> <li id="faq-testsuite-stages-c-"> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="20d2c6bf-b437-4d7c-993b-8f77522b7981" data-name="faq-testsuite-stages"> <li class="active"> <div class="table-wrapper"><table> <thead> <tr> <th>Stage</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>before</td> <td>executed only once at the start of the TestSuite run</td> </tr> <tr> <td>after</td> <td>executed only once at the end of the TestSuite run</td> </tr> </tbody> </table></div> </li> <li> <div class="table-wrapper"><table> <thead> <tr> <th>Stage</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>[Before]</td> <td>executed only once at the start of the TestSuite run</td> </tr> <tr> <td>[After]</td> <td>executed only once at the end of the TestSuite run</td> </tr> </tbody> </table></div> </li> </ul> <h2 id="hook-before"> <a href="#hook-before" class="anchor-heading" aria-labelledby="hook-before"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hook <em>before</em> </h2> <p>This function is executed once at the beginning of the TestSuite and is used to set up any resources or data that will be required by all of the test cases in the suite. For example, if you need to create a database connection or initialize a global configuration object, you would do so in this function.</p> <ul id="faq-testsuite-before" class="tab" data-tab="66fc6e7e-b8c1-4f89-9a83-7c52b7a2f714" data-name="faq-testsuite-before"> <li class="active" id="faq-testsuite-before-gdscript"> <a href="#">GdScript </a> </li> <li id="faq-testsuite-before-c-"> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="66fc6e7e-b8c1-4f89-9a83-7c52b7a2f714" data-name="faq-testsuite-before"> <li class="active"> <p><strong>func before()</strong><br /> Use this function inside your TestSuite to define a pre-hook and prepare your TestSuite data.</p> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class_name</span> <span class="n">GdUnitExampleTest</span>
<span class="k">extends</span> <span class="n">GdUnitTestSuite</span>

<span class="k">var</span> <span class="n">_test_data</span> <span class="p">:</span><span class="n">Node</span>
<span class="k">var</span> <span class="n">_config</span> <span class="p">:</span><span class="kt">Dictionary</span>

<span class="c1"># create some test data here</span>
<span class="k">func</span> <span class="nf">before</span><span class="p">():</span>
    <span class="n">_test_data</span> <span class="o">=</span> <span class="n">Node</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
    <span class="n">_config</span> <span class="o">=</span> <span class="n">load_test_configuration</span><span class="p">()</span>
</code></pre></div></div> </li> <li> <p><strong>[Before]</strong><br /> Use this attribute inside your TestSuite to define a method as pre hook to prepare your TestSuite data.</p> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">GdUnit4</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">static</span> <span class="n">GdUnit4</span><span class="p">.</span><span class="n">Assertions</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ExampleProject.Tests</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">TestSuite</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">ExampleTest</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="n">Godot</span><span class="p">.</span><span class="n">Node</span> <span class="n">_testData</span><span class="p">;</span>
        <span class="k">private</span> <span class="n">Dictionary</span> <span class="n">_config</span><span class="p">;</span>

        <span class="p">[</span><span class="n">Before</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">Setup</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// create some test data here</span>
            <span class="n">_testData</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Godot</span><span class="p">.</span><span class="nf">Node</span><span class="p">();</span>
            <span class="n">_config</span> <span class="p">=</span> <span class="nf">LoadTestConfiguration</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> </li> </ul> <h2 id="hook-after"> <a href="#hook-after" class="anchor-heading" aria-labelledby="hook-after"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hook <em>after</em> </h2> <p>This function is executed once at the end of the TestSuite and is used to clean up any resources or data that was created or modified during the test run. For example, if you need to close a database connection or delete temporary files, you would do so in this function.</p> <ul id="faq-testsuite-after" class="tab" data-tab="b8c4177d-0b79-4ee1-be64-51bbea45094b" data-name="faq-testsuite-after"> <li class="active" id="faq-testsuite-after-gdscript"> <a href="#">GdScript </a> </li> <li id="faq-testsuite-after-c-"> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="b8c4177d-0b79-4ee1-be64-51bbea45094b" data-name="faq-testsuite-after"> <li class="active"> <p><strong>func after():</strong><br /> Use this function inside your TestSuite to define a shutdown hook and release your TestSuite data.</p> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class_name</span> <span class="n">GdUnitExampleTest</span>
<span class="k">extends</span> <span class="n">GdUnitTestSuite</span>

<span class="k">var</span> <span class="n">_test_data</span> <span class="p">:</span><span class="n">Node</span>
<span class="k">var</span> <span class="n">_db_connection</span>

<span class="k">func</span> <span class="nf">after</span><span class="p">():</span>
    <span class="c1"># Clean up resources created in before()</span>
    <span class="k">if</span> <span class="n">_test_data</span><span class="p">:</span>
        <span class="n">_test_data</span><span class="o">.</span><span class="n">free</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">_db_connection</span><span class="p">:</span>
        <span class="n">_db_connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></div> </li> <li> <p><strong>[After]</strong><br /> Use this attribute inside your TestSuite to define a method as shutdown hook to release your TestSuite data.</p> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">TestSuite</span><span class="p">]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">ExampleTest</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">Godot</span><span class="p">.</span><span class="n">Node</span> <span class="n">_testData</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">DatabaseConnection</span> <span class="n">_dbConnection</span><span class="p">;</span>

    <span class="p">[</span><span class="n">After</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">TearDownSuite</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Clean up resources created in Before()</span>
        <span class="n">_testData</span><span class="p">?.</span><span class="nf">Free</span><span class="p">();</span>
        <span class="n">_dbConnection</span><span class="p">?.</span><span class="nf">Close</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> </li> </ul><hr /> <h2 id="testcase-hooks"> <a href="#testcase-hooks" class="anchor-heading" aria-labelledby="testcase-hooks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> TestCase Hooks </h2> <p>GdUnit provide the following test hooks that allow you to control the test environment. GdUnit4 allows you to use asserts within these stages, and any errors that occur will be reported.</p> <ul id="faq-testcase-stages" class="tab" data-tab="73c3b087-996b-4bcc-a7d8-524a8abda504" data-name="faq-testcase-stages"> <li class="active" id="faq-testcase-stages-gdscript"> <a href="#">GdScript </a> </li> <li id="faq-testcase-stages-c-"> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="73c3b087-996b-4bcc-a7d8-524a8abda504" data-name="faq-testcase-stages"> <li class="active"> <div class="table-wrapper"><table> <thead> <tr> <th>Stage</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>before_test</td> <td>executed before each test is started</td> </tr> <tr> <td>after_test</td> <td>executed after each test has finished</td> </tr> </tbody> </table></div> </li> <li> <div class="table-wrapper"><table> <thead> <tr> <th>Stage</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>[BeforeTest]</td> <td>executed before each test is started</td> </tr> <tr> <td>[AfterTest]</td> <td>executed after each test has finished</td> </tr> </tbody> </table></div> </li> </ul> <h2 id="hook-before_test"> <a href="#hook-before_test" class="anchor-heading" aria-labelledby="hook-before_test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hook <em>before_test</em> </h2> <p>This function is executed before each test case and is used to set up any resources or data that are required by the test case. For example, if you need to create a temporary file or initialize a class instance, you would do so in this function.</p> <ul id="faq-testsuite-before-test" class="tab" data-tab="2db59638-4bf7-497e-bd26-0edd849cd775" data-name="faq-testsuite-before-test"> <li class="active" id="faq-testsuite-before-test-gdscript"> <a href="#">GdScript </a> </li> <li id="faq-testsuite-before-test-c-"> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="2db59638-4bf7-497e-bd26-0edd849cd775" data-name="faq-testsuite-before-test"> <li class="active"> <p><strong>func before_test():</strong><br /> Use this function inside your TestSuite to define a pre hook to initialize your TestCase data.</p> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class_name</span> <span class="n">GdUnitExampleTest</span>
<span class="k">extends</span> <span class="n">GdUnitTestSuite</span>

<span class="k">var</span> <span class="n">_test_instance</span> <span class="p">:</span><span class="n">Node</span>

<span class="k">func</span> <span class="nf">before_test</span><span class="p">():</span>
    <span class="c1"># Each test gets a fresh instance</span>
    <span class="n">_test_instance</span> <span class="o">=</span> <span class="n">auto_free</span><span class="p">(</span><span class="n">Node</span><span class="o">.</span><span class="n">new</span><span class="p">())</span>
    <span class="n">_test_instance</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">"TestNode"</span>
</code></pre></div></div> </li> <li> <p><strong>[BeforeTest]</strong><br /> Use this attribute inside your TestSuite to define a method as pre hook to initialize your TestCase data.</p> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">TestSuite</span><span class="p">]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">ExampleTest</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">Godot</span><span class="p">.</span><span class="n">Node</span> <span class="n">_testInstance</span><span class="p">;</span>

    <span class="p">[</span><span class="n">BeforeTest</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">SetupTest</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Each test gets a fresh instance</span>
        <span class="n">_testInstance</span> <span class="p">=</span> <span class="nf">AutoFree</span><span class="p">(</span><span class="k">new</span> <span class="n">Godot</span><span class="p">.</span><span class="nf">Node</span><span class="p">());</span>
        <span class="n">_testInstance</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">"TestNode"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> </li> </ul> <h2 id="hook-after_test"> <a href="#hook-after_test" class="anchor-heading" aria-labelledby="hook-after_test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hook <em>after_test</em> </h2> <p>This function is executed after each test case and is used to clean up any resources or data that were created or modified during the test case. For example, if you need to delete a temporary file or close a network connection, you would do so in this function.</p> <ul id="faq-testsuite-after-test" class="tab" data-tab="f6b66b18-5c90-44e3-bf49-935dc8660eb6" data-name="faq-testsuite-after-test"> <li class="active" id="faq-testsuite-after-test-gdscript"> <a href="#">GdScript </a> </li> <li id="faq-testsuite-after-test-c-"> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="f6b66b18-5c90-44e3-bf49-935dc8660eb6" data-name="faq-testsuite-after-test"> <li class="active"> <p><strong>func after_test():</strong><br /> Use this function inside your TestSuite to define a test cleanup hook to release your TestCase data if needed.</p> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class_name</span> <span class="n">GdUnitExampleTest</span>
<span class="k">extends</span> <span class="n">GdUnitTestSuite</span>

<span class="k">var</span> <span class="n">_temp_file_path</span> <span class="p">:</span><span class="kt">String</span>

<span class="k">func</span> <span class="nf">after_test</span><span class="p">():</span>
    <span class="c1"># Clean up test-specific resources</span>
    <span class="k">if</span> <span class="n">_temp_file_path</span> <span class="ow">and</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">file_exists</span><span class="p">(</span><span class="n">_temp_file_path</span><span class="p">):</span>
        <span class="n">DirAccess</span><span class="o">.</span><span class="n">remove_absolute</span><span class="p">(</span><span class="n">_temp_file_path</span><span class="p">)</span>
    <span class="c1"># Reset any modified global state</span>
    <span class="n">reset_test_environment</span><span class="p">()</span>
</code></pre></div></div> </li> <li> <p><strong>[AfterTest]</strong><br /> Use this attribute inside your TestSuite to define a method as cleanup hook to release your TestCase data if needed.</p> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">TestSuite</span><span class="p">]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">ExampleTest</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">string</span> <span class="n">_tempFilePath</span><span class="p">;</span>

    <span class="p">[</span><span class="n">AfterTest</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">TearDownTest</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Clean up test-specific resources</span>
        <span class="k">if</span> <span class="p">(!</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">_tempFilePath</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">FileAccess</span><span class="p">.</span><span class="nf">FileExists</span><span class="p">(</span><span class="n">_tempFilePath</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="n">DirAccess</span><span class="p">.</span><span class="nf">RemoveAbsolute</span><span class="p">(</span><span class="n">_tempFilePath</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">// Reset any modified global state</span>
        <span class="nf">ResetTestEnvironment</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> </li> </ul><hr /> <h2 id="common-pitfalls-and-solutions"> <a href="#common-pitfalls-and-solutions" class="anchor-heading" aria-labelledby="common-pitfalls-and-solutions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Common Pitfalls and Solutions </h2> <h3 id="1-orphan-nodes"> <a href="#1-orphan-nodes" class="anchor-heading" aria-labelledby="1-orphan-nodes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Orphan Nodes </h3> <p><strong>Problem:</strong> Forgetting to free nodes creates orphan warnings.<br /> <strong>Solution:</strong> Always use <code class="language-plaintext highlighter-rouge">auto_free()</code> or manually free in cleanup hooks.</p> <h3 id="2-test-interdependence"> <a href="#2-test-interdependence" class="anchor-heading" aria-labelledby="2-test-interdependence"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Test Interdependence </h3> <p><strong>Problem:</strong> Tests fail when run individually but pass when run together.<br /> <strong>Solution:</strong> Use <code class="language-plaintext highlighter-rouge">before_test()</code> instead of <code class="language-plaintext highlighter-rouge">before()</code> for mutable state.</p> <h3 id="3-resource-leaks"> <a href="#3-resource-leaks" class="anchor-heading" aria-labelledby="3-resource-leaks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Resource Leaks </h3> <p><strong>Problem:</strong> File handles, network connections, or timers not cleaned up.<br /> <strong>Solution:</strong> Always implement corresponding cleanup in <code class="language-plaintext highlighter-rouge">after</code> hooks:</p> <div class="language-gdscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="nf">before_test</span><span class="p">():</span>
    <span class="n">_file</span> <span class="o">=</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">"test.txt"</span><span class="p">,</span> <span class="n">FileAccess</span><span class="o">.</span><span class="n">WRITE</span><span class="p">)</span>
    <span class="n">_timer</span> <span class="o">=</span> <span class="n">auto_free</span><span class="p">(</span><span class="n">Timer</span><span class="o">.</span><span class="n">new</span><span class="p">())</span>
    
<span class="k">func</span> <span class="nf">after_test</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">_file</span><span class="p">:</span>
        <span class="n">_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="c1"># Timer is auto-freed</span>
</code></pre></div></div> <h3 id="4-signal-connection-leaks"> <a href="#4-signal-connection-leaks" class="anchor-heading" aria-labelledby="4-signal-connection-leaks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. Signal Connection Leaks </h3> <p><strong>Problem:</strong> Signals remain connected after tests.<br /> <strong>Solution:</strong> Disconnect signals in cleanup or use <code class="language-plaintext highlighter-rouge">auto_free()</code> for the connected objects.</p> <h3 id="5-incorrect-hook-choice"> <a href="#5-incorrect-hook-choice" class="anchor-heading" aria-labelledby="5-incorrect-hook-choice"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5. Incorrect Hook Choice </h3> <p><strong>Problem:</strong> Using <code class="language-plaintext highlighter-rouge">before()</code> for data that each test modifies.<br /> <strong>Solution:</strong> Follow the “When to Use Each Hook” guide above.</p><hr /> <h2 id="see-also"> <a href="#see-also" class="anchor-heading" aria-labelledby="see-also"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> See Also </h2> <ul> <li><a href="/gdUnit4/v6.0.x/advanced_testing/hooks/#testing-with-hooks">Testing with Hooks</a> - Learn about Session-level hooks</li> <li><a href="/gdUnit4/v6.0.x/first_steps/settings/#hooks-settings">Settings - Hooks Configuration</a> - Configure session hooks</li> </ul> </main> </div> </div> <footer> <div class="text-small text-grey-dk-100 mb-0"> <p>Copyright &copy; 2021-2025 Mike Schulze. Distributed by an <a href="https://github.com/MikeSchulze/gdUnit4/blob/master/LICENSE">MIT license.</a>.</p> </div> </footer> <div class="search-overlay"></div> </div> <script src="/gdUnit4/v6.0.x/assets/js/tabs.js"></script> <link rel="stylesheet" href="/gdUnit4/v6.0.x/assets/css/tab.css" /> <link rel="stylesheet" href="/gdUnit4/v6.0.x/assets/css/site-header.css" /> <link rel="stylesheet" href="/gdUnit4/v6.0.x/assets/css/site-footer.css" /> </body> </html>
